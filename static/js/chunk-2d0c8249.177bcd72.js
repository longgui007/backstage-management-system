(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c8249"],{"542f":function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("el-card",{staticStyle:{margin:"20px 0px"}},[r("CategorySelect",{attrs:{show:t.attrTableShow},on:{getCategoryId:t.getCategoruId}})],1),r("el-card",[t.attrFormShow?r("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.formAttr}},[r("el-form-item",{attrs:{label:"属性名"}},[r("el-input",{attrs:{placeholder:"属性名"},model:{value:t.formAttr.attrName,callback:function(e){t.$set(t.formAttr,"attrName",e)},expression:"formAttr.attrName"}})],1),r("el-button",{attrs:{type:"primary",disabled:!t.formAttr.attrName},on:{click:t.addAttrValue}},[t._v("添加属性值")]),r("el-button",{on:{click:t.cacel}},[t._v("取消")])],1):t._e(),t.attrFormShow?t._e():r("el-button",{attrs:{type:"primary",disabled:!t.category3Id},on:{click:t.addAttr}},[t._v("添加属性")]),t.attrTableShow?r("el-table",{staticStyle:{width:"100%"},attrs:{data:t.attrTableData,border:""}},[r("el-table-column",{attrs:{type:"index",label:"序号",width:"80",align:"center"}}),r("el-table-column",{attrs:{prop:"attrName",label:"属性名称",width:"150"}}),r("el-table-column",{attrs:{prop:"prop",label:"属性值列表"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;e.$index;return t._l(a.attrValueList,(function(e,a){return r("el-tag",{key:e.id,attrs:{type:"success"}},[t._v(t._s(e.valueName))])}))}}],null,!1,2237035825)}),r("el-table-column",{attrs:{prop:"address",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;e.$index;return[r("div",[r("el-button",{attrs:{type:"warning"},on:{click:function(e){return t.updataAttr(a)}}},[t._v("修改")]),r("el-button",{attrs:{type:"danger"}},[t._v("删除")])],1)]}}],null,!1,3320199960)})],1):t._e(),t.attrTableShow?t._e():r("div",[r("el-table",{staticStyle:{width:"100%"},attrs:{data:t.formAttr.attrValueList,border:""}},[r("el-table-column",{attrs:{prop:"id",label:"序号",width:"80",align:"center"}}),r("el-table-column",{attrs:{prop:"prop",label:"属性值列表"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;e.$index;return[a.flag?r("el-input",{attrs:{size:"mini",placeholder:"属性值"},model:{value:a.valueName,callback:function(e){t.$set(a,"valueName",e)},expression:"row.valueName"}}):t._e()]}}],null,!1,2112417818)}),r("el-table-column",{attrs:{prop:"address",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){e.row;var a=e.$index;return[r("div",[r("el-button",{attrs:{type:"danger"},on:{click:function(e){return t.deleteAttrValue(a)}}},[t._v("删除")])],1)]}}],null,!1,3541339079)})],1),r("el-button",{attrs:{type:"primary",disabled:t.formAttr.attrValueList.length<1},on:{click:t.addOrUpdateAttr}},[t._v("保存")]),r("el-button",{on:{click:t.cacel}},[t._v("取消")])],1)],1)],1)},o=[],l=r("1da1"),n=(r("4de4"),r("d3b7"),r("a434"),r("159b"),r("96cf"),r("0644")),c=r.n(n),i={name:"attr",data:function(){return{categoryId:{},category1Id:"",category2Id:"",category3Id:"",attrTableData:[],formAttr:{attrName:"",attrValueList:[],categoryId:0,categoryLevel:3},attrFormShow:!1,attrTableShow:!0}},methods:{getCategoruId:function(t){t.category1Id?(this.category1Id=t.category1Id,this.category2Id="",this.category3Id=""):t.category2Id?(this.category2Id=t.category2Id,this.category3Id=""):(this.category3Id=t.category3Id,this.getAttrList())},getAttrList:function(){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function e(){var r,a,o,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.category1Id,a=t.category2Id,o=t.category3Id,console.log(r,a,o),e.next=4,t.$API.attr.resGetAttrInfoList(r,a,o);case 4:l=e.sent,200==l.code&&(t.attrTableData=l.data);case 6:case"end":return e.stop()}}),e)})))()},addAttr:function(){this.attrFormShow=!0,this.attrTableShow=!1,this.formAttr={attrName:"",attrValueList:[],categoryId:this.category3Id,categoryLevel:3}},addAttrValue:function(){this.formAttr.attrValueList.push({attrId:this.formAttr.id,valueName:"",flag:!0})},addOrUpdateAttr:function(){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.formAttr.attrValueList=t.formAttr.attrValueList.filter((function(t){if(""!=t.valueName)return delete t.flag,!0})),e.prev=1,e.next=4,t.$API.attr.reqAddAttr(t.formAttr);case 4:r=e.sent,console.log(r),e.next=10;break;case 8:e.prev=8,e.t0=e["catch"](1);case 10:case"end":return e.stop()}}),e,null,[[1,8]])})))()},cacel:function(){this.attrFormShow=!1,this.attrTableShow=!0},deleteAttrValue:function(t){console.log(t),this.formAttr.attrValueList.splice(t,1),console.log(this.formAttr.attrValueList)},updataAttr:function(t){var e=this;console.log(t),this.attrTableShow=!1,this.formAttr=c()(t),this.formAttr.attrValueList.forEach((function(t){e.$set(t,"flag",!0)}))}}},s=i,u=r("2877"),d=Object(u["a"])(s,a,o,!1,null,null,null);e["default"]=d.exports}}]);